<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="UTF-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Pauls Model Glider flying Site Guide - Isle of Man Weather</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
        
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#00A0A0", // Teal Green
                        "background-light": "#E0F7FA", // Light Cyan
                        "background-dark": "#004D40", // Dark Cyan
                        "card-light": "#FFFFFF",
                        "card-dark": "#00796B", // Medium Cyan
                        "accent-red": "#E57373", // Light Red for alerts if needed
                        "text-light": "#006064", // Dark Cyan Text
                        "text-dark": "#B2EBF2", // Light Cyan Text
                        "text-muted-light": "#4DB6AC", // Medium Cyan Muted
                        "text-muted-dark": "#80CBC4", // Light Teal Muted
                    },
                    fontFamily: {
                        "display": ["Space Grotesk"]
                    },
                    borderRadius: { "DEFAULT": "0.5rem", "lg": "0.75rem", "xl": "1.5rem", "full": "9999px" },
                },
            },
        }
    </script>
<style>
        .compass-dial {
            transform: rotate(var(--wind-direction, 0deg));
            transition: transform 2s ease-out;
        }
        .temp-change {
            animation: pulse 2s infinite alternate ease-in-out;
        }
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        .weather-icon-spin {
            animation: spin 5s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
<div class="flex flex-col min-h-screen">
<header class="bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-300 dark:border-gray-700">
<div class="container mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex items-center justify-between h-16">
<div class="flex items-center gap-3">
<span class="material-symbols-outlined text-primary text-3xl">waves</span>
<h1 class="text-xl font-bold text-gray-900 dark:text-white">Pauls Model Glider flying Site Guide</h1>
</div>
<nav class="hidden md:flex items-center gap-6">
<a class="text-sm font-medium text-text-muted-light dark:text-text-muted-dark hover:text-primary dark:hover:text-primary transition-colors" href="#">Home</a>
<a class="text-sm font-medium text-text-muted-light dark:text-text-muted-dark hover:text-primary dark:hover:text-primary transition-colors" href="#">Forecast</a>
<a class="text-sm font-medium text-text-muted-light dark:text-text-muted-dark hover:text-primary dark:hover:text-primary transition-colors" href="#">Radar</a>
<a class="text-sm font-medium text-text-muted-light dark:text-text-muted-dark hover:text-primary dark:hover:text-primary transition-colors" href="#">Observations</a>
</nav>
<div class="flex items-center">
<button class="md:hidden p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary">
<span class="material-symbols-outlined">menu</span>
</button>
</div>
</div>
</div>
</header>
<main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
<div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
<div class="lg:col-span-3 space-y-8">
<div class="bg-card-light dark:bg-card-dark p-6 rounded-xl shadow-lg border border-gray-300 dark:border-gray-700">
<h2 class="text-3xl font-bold mb-5 text-primary text-center tracking-wide">Current Conditions: Isle of Man</h2>
<div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
<div class="flex flex-col items-center justify-center bg-background-light dark:bg-background-dark p-5 rounded-lg text-center shadow-md border border-gray-300 dark:border-gray-600">
<span class="material-symbols-outlined text-primary text-4xl mb-3 weather-icon-spin">air</span>
<p class="text-sm text-text-muted-light dark:text-text-muted-dark">Wind Speed</p>
<p id="windSpeed" class="text-3xl font-bold text-gray-900 dark:text-white temp-change">-- <span class="text-xl font-normal">mph</span></p>
<p id="windGust" class="text-sm text-text-muted-light mt-1">Gusts: -- mph</p>
</div>
<div class="flex flex-col items-center justify-center bg-background-light dark:bg-background-dark p-5 rounded-lg text-center shadow-md border border-gray-300 dark:border-gray-600">
<div class="relative w-32 h-32">
  <div class="absolute inset-0 border-4 border-primary/20 rounded-full animate-pulse"></div>
<div class="absolute inset-0 compass-dial flex items-center justify-center" style="--wind-direction:0deg;">
  <span id="compassNeedle" class="material-symbols-outlined text-primary text-6xl" 
        style="display:inline-block; transform-origin:center; transition: transform 600ms ease;">
    navigation
  </span>
</div>
</div>

<p id="windDirLabel" class="text-2xl font-bold text-gray-900 dark:text-white">--</p>


        

</div>
<div class="space-y-4 bg-background-light dark:bg-background-dark p-5 rounded-lg shadow-md border border-gray-300 dark:border-gray-600 flex flex-col justify-center">
<div class="flex items-center gap-3">
<span class="material-symbols-outlined text-primary">device_thermostat</span>
<div>
<p id="temp" class="font-bold text-gray-900 dark:text-white text-2xl temp-change">--°C</p>
</div>
</div>
<div class="flex items-center gap-3">
<span class="material-symbols-outlined text-primary">humidity_percentage</span>
<div>
<p id="humidity" class="font-bold text-gray-900 dark:text-white text-2xl">--%</p>
</div>
</div>
</div>
</div>
</div>
<div class="bg-card-light dark:bg-card-dark p-6 rounded-xl shadow-lg border border-gray-300 dark:border-gray-700">
<h2 class="text-3xl font-bold mb-5 text-primary text-center tracking-wide">Weather Radar</h2>
<div class="aspect-w-16 aspect-h-9 bg-gray-300 dark:bg-gray-700 rounded-lg overflow-hidden h-[30vh] md:h-[40vh] shadow-inner">
<iframe class="w-full h-full" frameborder="0" src="https://embed.windy.com/embed2.html?lat=54.236&amp;lon=-4.548&amp;zoom=8&amp;level=surface&amp;overlay=wind&amp;menu=&amp;message=true&amp;marker=&amp;calendar=now&amp;pressure=true&amp;type=map&amp;location=coordinates&amp;detail=true&amp;metricWind=mph&amp;metricTemp=%C2%B0C&amp;radarRange=-1">
</iframe>
</div>
</div>
<div class="bg-card-light dark:bg-card-dark p-6 rounded-xl shadow-lg border border-gray-300 dark:border-gray-700">
<h2 class="text-3xl font-bold mb-5 text-primary text-center tracking-wide">Forecast</h2>
<div class="space-y-5">
<div>
<h3 class="font-bold text-primary text-xl">Next 24 Hours</h3>
<p class="text-text-light dark:text-text-dark leading-relaxed">Expect intermittent cloud cover with a chance of light showers. Winds are projected to ease gradually to around 10 mph by evening.</p>
</div>
<hr class="border-gray-300 dark:border-gray-600"/>
<div>
<h3 class="font-bold text-primary text-xl">Extended Forecast</h3>
<p class="text-text-light dark:text-text-dark leading-relaxed">The week ahead promises predominantly sunny skies with moderate temperatures, hovering near a pleasant 15°C.</p>
</div>
</div>
</div>
</div>
<!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Interactive Wind Map -->
<div class="lg:col-span-2 space-y-8">
<section id="map-view" class="bg-card-light dark:bg-card-dark p-6 rounded-xl shadow-lg border border-gray-300 dark:border-gray-700 h-full flex flex-col">        
<h2 class="text-3xl font-bold mb-4 text-primary text-center">Flying Site Map</h2>
<div class="aspect-w-16 aspect-h-9 rounded-md overflow-hidden border border-gray-300 dark:border-gray-600">      
<div id="wind-map" style="height: 450px; border-radius: 12px;"></div>

<!-- Google street view -->
<section id="street-view" class="w-full max-w-screen-xl mx-auto mt-8 p-4 bg-card-light dark:bg-card-dark rounded-xl shadow-lg">
  <h2 id="streetLabel" class="text-3xl font-bold mb-4 text-primary text-center">Street View:</h2>
  <div class="rounded-lg overflow-hidden shadow-inner">
    <iframe id="streetFrame"
      class="w-full h-[450px] rounded-lg"
      style="border:0;"
      allowfullscreen
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>
  </div>
</section>

        


<!-- Wind Forcast section--!>
<section class="mt-6 flex-grow flex flex-col justify-end">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4 text-center">Wind Forecast</h3>
<div class="space-y-2">
<div class="grid grid-cols-[1fr_auto] items-center bg-background-light dark:bg-background-dark p-3 rounded-md transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-800/50 border-l-4 border-primary shadow-sm">
<span class="font-medium text-text-light dark:text-text-dark">Now (2 PM)</span>
<div class="flex items-center gap-3 justify-end">
<span class="material-symbols-outlined text-primary text-2xl weather-icon-spin">air</span>
<span class="font-bold text-gray-900 dark:text-white text-lg">15 mph SW</span>
</div>
</div>
<div class="grid grid-cols-[1fr_auto] items-center bg-background-light dark:bg-background-dark p-3 rounded-md transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-800/50 border-l-4 border-primary/80 shadow-sm">
<span class="font-medium text-text-muted-light dark:text-text-muted-dark">3 PM</span>
<div class="flex items-center gap-3 justify-end">
<span class="material-symbols-outlined text-primary/80 text-2xl">air</span>
<span class="font-bold text-text-light dark:text-text-dark/90 text-lg">14 mph SW</span>
</div>
</div>
<div class="grid grid-cols-[1fr_auto] items-center bg-background-light dark:bg-background-dark p-3 rounded-md transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-800/50 border-l-4 border-primary/60 shadow-sm">
<span class="font-medium text-text-muted-light dark:text-text-muted-dark">4 PM</span>
<div class="flex items-center gap-3 justify-end">
<span class="material-symbols-outlined text-primary/60 text-2xl">air</span>
<span class="font-bold text-text-light dark:text-text-dark/80 text-lg">12 mph WSW</span>
</div>
</div>
<div class="grid grid-cols-[1fr_auto] items-center bg-background-light dark:bg-background-dark p-3 rounded-md transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-800/50 border-l-4 border-primary/40 shadow-sm">
<span class="font-medium text-text-muted-light dark:text-text-muted-dark">5 PM</span>
<div class="flex items-center gap-3 justify-end">
<span class="material-symbols-outlined text-primary/40 text-2xl">air</span>
<span class="font-bold text-text-light dark:text-text-dark/70 text-lg">10 mph W</span>
</section>
</div>
</div>
</div>
</div>
</div>
</div>
</main></div>
<footer class="bg-background-light dark:bg-background-dark mt-8 border-t border-gray-300 dark:border-gray-700">
<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm text-text-muted-light dark:text-text-muted-dark">
<p>© 2025 Pauls Model Glider. All rights reserved.</p>
</div>
</footer>

</body></html>

<!-- ✅ JavaScript logic -->
<script>
 
// Initialize Leaflet map
const map = L.map('wind-map').setView([54.236, -4.495], 10); // show Isle Of Man

// Add OpenStreetMap tiles
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '© OpenStreetMap contributors'
}).addTo(map);

// Example wind direction (replace with live data)
const windDirection = 'N'; ; // Options: '1', 'NW', 'SW', 'W'

// Define marker positions
const markers = {
   'N': { lat: 54.24, lng: -4.48, label: 'North Wind' },// Bandy Well Rd or Beinn-y-Phott
  'NE': { lat: 54.23, lng: -4.46, label: 'Windy Corner' }, // Windy Corner
  'ENE': { lat: 54.23, lng: -4.46, label: 'Windy Corner2' }, // Windy Corner      
   'E': { lat: 54.26, lng: -4.45, label: 'Verandah' }, //Verandah
  'SE': { lat: 54.12, lng: -4.73, label: 'Sloth Road' }, //A36 
   'S': { lat: 54.24, lng: -4.51, label: 'Sheep Pens' }, //Sheep Pens
  'SW': { lat: 54.25, lng: -4.47, label: 'Beinn-y-Phott' }, //Beinn-y-Phott
   'W': { lat: 54.12, lng: -4.73, label: 'Stacks' }, // Slieau Maggle or Stacks 54.12 -4.73
  'NW': { lat: 54.23, lng: -4.66, label: 'White Strand' } // white strand
};
       
// Add selected marker
if (markers[windDirection]) {
  const { lat, lng, label } = markers[windDirection];
  L.marker([lat, lng]).addTo(map).bindPopup(label).openPopup();
} else {
  console.warn('No marker defined for wind direction:', windDirection);
}
</script>
        
<script>        
// Generate Street View URL
const streetViewEmbeds = {
  'N': "https://www.google.com/maps/embed?pb=!4v1759611678150!6m8!1m7!1sIQTG0Pa9ReCacyLo5_TcgA!2m2!1d54.24866017637177!2d-4.48290157491008!3f351.3229709797761!4f-7.541260408466712!5f0.7820865974627469", // Bandy Well Rd or Beinn-y-Phott
  'NE': "https://www.google.com/maps/embed?pb=!4v1759577130283!6m8!1m7!1s-oN4uJcb7DiLvDI7GEosGw!2m2!1d54.23089143243511!2d-4.467826868550862!3f67.2631780595343!4f0.4599784374144491!5f0.7820865974627469", // Windy Corner
  'ENE': "https://www.google.com/maps/embed?pb=!4v1759577130283!6m8!1m7!1s-oN4uJcb7DiLvDI7GEosGw!2m2!1d54.23089143243511!2d-4.467826868550862!3f67.2631780595343!4f0.4599784374144491!5f0.7820865974627469", // Windy Corner
  'E': "https://www.google.com/maps/embed?pb=!4v1759611786609!6m8!1m7!1sbG53IkAipWdCf4dkNqd1tQ!2m2!1d54.26153893287729!2d-4.450440591739061!3f132.9439967438811!4f-2.02844528602175!5f0.7820865974627469", // Verandah
  'SE': "https://www.google.com/maps/embed?pb=!4v1759685432804!6m8!1m7!1sNamfBo838uoWJ_TwMy-1ug!2m2!1d54.12857133898845!2d-4.71955846361662!3f166.33636707336223!4f-1.4741538160368606!5f0.7820865974627469", // A36
  'S': "https://www.google.com/maps/embed?pb=!4v1759685594129!6m8!1m7!1seKuM02Aj5Qakex_59CwfmA!2m2!1d54.2448820602774!2d-4.517262771085067!3f176.11561766586988!4f-7.7498410558731905!5f0.7820865974627469", // Sheep Pens
  'SW': "https://www.google.com/maps/embed?pb=!4v1759610256437!6m8!1m7!1s_CCHy4BkcWV8j_1xp-780A!2m2!1d54.24343527115033!2d-4.473254677072882!3f221.62909533872394!4f-1.1032652649421664!5f0.400000000000000", // Beinn-y-Phott
  'W': "https://www.google.com/maps/embed?pb=!4v1759599080198!6m8!1m7!1skNyeKUX6lwxW80sKguEnKg!2m2!1d54.12521659471083!2d-4.730623174153571!3f289.4655636396303!4f3.1774959027562346!5f0.7820865974627469", // Slieau Maggle / Stacks
  'NW': "https://www.google.com/maps/embed?pb=!4v1759600000006!6m8!1m7!1sNW_PANOID_HERE!2m2!1d54.230000!2d-4.660000!3f315!4f0!5f0.7820865974627469" // White Strand
};
          
const windDirection1 = 'W'; // Replace with live data
        
const streetFrame = document.getElementById("streetFrame");
        if (markers[windDirection]) {
  const { label } = markers[windDirection];
  const streetLabel = document.getElementById("streetLabel");
  if (streetLabel) {
    streetLabel.textContent = `Street View: ${label}`;
  }
}

if (streetViewEmbeds[windDirection]) {
  streetFrame.src = streetViewEmbeds[windDirection];
} else {
  console.warn("No Street View embed for wind direction:", windDirection);
}

</script>        

<script>
/* CONFIG */
const LAT = 54.236;
const LON = -4.548;
const WIND_SPEED_UNIT = 'mph';
const TIMEZONE = 'auto';
const VARIABLES = [
  'temperature_2m',
  'relative_humidity_2m',
  'wind_speed_10m',
  'wind_direction_10m',
  'wind_gusts_10m'
];

/* Request current + hourly as fallback (current returns model 15-min values when available) */
const apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${encodeURIComponent(LAT)}&longitude=${encodeURIComponent(LON)}&hourly=${VARIABLES.join(',')}&current=${VARIABLES.join(',')}&windspeed_unit=${encodeURIComponent(WIND_SPEED_UNIT)}&timezone=${encodeURIComponent(TIMEZONE)}`;

/* Utility: degrees -> 16-point cardinal */
function degToCardinal(deg) {
  if (typeof deg !== 'number' || isNaN(deg)) return '--';
  const dirs = ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'];
  const idx = Math.floor((((deg % 360) + 360) % 360) / 22.5 + 0.5) % 16;
  return dirs[idx];
}
   /* Compass needle  */     
function setWindDirection(deg, label) {
  const compass = document.querySelector('.compass-dial');
  if (compass) compass.style.setProperty('--wind-direction', `${deg}deg`);
  const labelEl = document.getElementById('windDirLabel');
  if (labelEl) labelEl.textContent = label || '--';
}
/* Safe element getter */
function el(id){ return document.getElementById(id); }

/* Update UI, map, and street view after receiving data */
async function fetchAndUpdateWeather() {
  try {
    const res = await fetch(apiUrl);
    if (!res.ok) throw new Error(`Open-Meteo request failed: ${res.status}`);
    const data = await res.json();

    // Prefer current fields when present (more immediate). Open‑Meteo returns 'current' object for many models.
    const current = data.current || null;
    const hourly = data.hourly || null;

    // Helper to pick value: prefer current, fallback to nearest hourly (nearest-to-now safer than last)
    function pickHourlyNearest(variable) {
      if (!hourly || !hourly.time) return null;
      const times = hourly.time;
      const now = Date.now();
      // find index of nearest timestamp
      let nearestIdx = 0;
      let nearestDiff = Infinity;
      for (let i = 0; i < times.length; i++) {
        const t = Date.parse(times[i]);
        const diff = Math.abs(t - now);
        if (diff < nearestDiff) { nearestDiff = diff; nearestIdx = i; }
      }
      return hourly[variable] && hourly[variable].length > nearestIdx ? hourly[variable][nearestIdx] : null;
    }

    // Extract values: prefer current, else nearest hourly
    const temp = current && typeof current.temperature_2m === 'number' ? current.temperature_2m : pickHourlyNearest('temperature_2m');
    const humidity = current && typeof current.relative_humidity_2m === 'number' ? current.relative_humidity_2m : pickHourlyNearest('relative_humidity_2m');
    const windSpeed = current && typeof current.wind_speed_10m === 'number' ? current.wind_speed_10m : pickHourlyNearest('wind_speed_10m');
    const windGust = current && typeof current.wind_gusts_10m === 'number' ? current.wind_gusts_10m : pickHourlyNearest('wind_gusts_10m');
    const windDirDeg = current && typeof current.wind_direction_10m === 'number' ? current.wind_direction_10m : pickHourlyNearest('wind_direction_10m');

    const windDirLabel = (typeof windDirDeg === 'number') ? degToCardinal(windDirDeg) : '--';

    // Update DOM elements (guard for existence)
    if (el('temp') && temp !== null) el('temp').textContent = `${Math.round(temp)}°C`;
    if (el('humidity') && humidity !== null) el('humidity').textContent = `${Math.round(humidity)}%`;
    if (el('windSpeed') && windSpeed !== null) el('windSpeed').innerHTML = `${Math.round(windSpeed)} <span class="text-xl font-normal">mph</span>`;
    if (el('windGust') && windGust !== null) el('windGust').textContent = `Gusts: ${Math.round(windGust)} mph`;
    if (el('windDirLabel')) el('windDirLabel').textContent = windDirLabel;
    if (el('updated')) {
      const stamp = current && current.time ? new Date(current.time) : (hourly && hourly.time ? new Date(hourly.time[0]) : new Date());
      el('updated').textContent = `Last update: ${stamp.toLocaleString()}`;
    }
        const windDirection = windDirLabel; // get wind direction for map points and street maps
          
    // Leaflet marker and Street View: only run when cardinal label is available and markers object exists
    const cardinalKey = windDirLabel;
    if (cardinalKey && window.markers && window.markers[cardinalKey]) {
      const { lat, lng, label } = window.markers[cardinalKey];
      // Clear existing markers layer if you created one; here we add a fresh marker
      if (window._liveWindMarker) {
        try { window._liveWindMarker.remove(); } catch(e){ /* ignore */ }
      }
      window._liveWindMarker = L.marker([lat, lng]).addTo(map).bindPopup(label);
      map.setView([lat, lng], 12, { animate: true });
      // update street view iframe if available
      if (window.streetViewEmbeds && window.streetViewEmbeds[cardinalKey] && el('streetFrame')) {
        el('streetFrame').src = window.streetViewEmbeds[cardinalKey];
        const streetLabel = el('streetLabel');
        if (streetLabel) streetLabel.textContent = `Street View: ${label}`;
      }
    } else {
      // no cardinal mapping found; log for debugging
      console.warn('No marker/street embed for wind direction cardinal:', cardinalKey);
    }

    return { temp, humidity, windSpeed, windGust, windDirDeg, windDirLabel, raw: data };
  } catch (err) {
    console.error('Open-Meteo fetch error', err);
    if (el('updated')) el('updated').textContent = 'Unable to load weather';
    return null;
  }
}

/* startup: fetch once, then refresh */
document.addEventListener('DOMContentLoaded', () => {
  // ensure global marker/embeds are present (your page defines them earlier)
  window.markers = window.markers || window.markers; // keep existing
  window.streetViewEmbeds = window.streetViewEmbeds || window.streetViewEmbeds;

  // initial fetch + keep in sync
  fetchAndUpdateWeather();
  setInterval(fetchAndUpdateWeather, 300000); // 5 minutes
});

</script>
<!-- JS: use this when you have windDirDeg (meteorological, coming-from) -->
<script>
  // Choose orientation: 'from' = use raw meteorological deg; 'to' = show where it's blowing to
  const WIND_POINTING = 'to'; // set to 'to' because your needle is 180° out

  function applyCompassRotation(windDeg) {
    if (typeof windDeg !== 'number' || isNaN(windDeg)) return;
    const angle = WIND_POINTING === 'to' ? (windDeg + 180) % 360 : ((windDeg % 360) + 360) % 360;
    const dial = document.querySelector('.compass-dial');
    if (dial) dial.style.setProperty('--wind-direction', `${angle}deg`);
    const needle = document.getElementById('compassNeedle');
    if (needle) needle.style.transform = `rotate(${angle}deg)`;
  }

  // Example: applyCompassRotation(225); // needle will point to 45 if WIND_POINTING='to'
</script>

        
